## Развертывание

1. Сначала клонируем проект
```
git clone git@github.com:Tagire/test_parser.git
```
2. Устанавливаем необходимые расширения для php
```
sudo apt-get install php-curl
```
3. Устанавливаем необходимые библиотеки через composer
```
php composer.phar install
```
4. Настраиваем БД, для этого копируем .env.example
```
cp .env.example .env
```
и меняем параметры DB_* на свои.
5. Настраиваем крон. Либо добавляем в крон таск, --from это страница с какой начинается парсинг, а --pages это количество страниц которые мы парсим
```
cd /path-to-your-project && php artisan parse-lostfilm --from 1 --pages 15
```
либо, если планируется использовать встроенный таск менеджер laravel, то добавляем в крон
```
* * * * * cd /path-to-your-project && php artisan schedule:run >> /dev/null 2>&1
```
и настраиваем через app/Console/Kernel.php. Для ежедневного запуска скрипта нужно раскомментировать строку в функции "schedule".
6. Прогоняем тестовый запуск
```
php artisan parse-lostfilm --from 1 --pages 15
```
Если всё правильно, то команда будет выводить текущую разбираемую страницу. Если что-то случилось, то детали ошибки будут записаны в critical log.

## Использование

После развертывания проекта, запустите его используя встроенный вебсервер:
```
php artisan serve
```

После этого проект будет доступен по адресу http://localhost:8000
На главной странице отображается таблица со списком серий отсортированных по дате выхода в порядке от самой новой серии до самой старой. Поддерживается полнотекстовый поиск, для поиска по части слова можно использовать символ "&ast;", например вместо "случилось", можно использовать "случи&ast;". По умолчанию поиск гибкий, для поиска точного соответствия запрос нужно обернуть в кавычки.
